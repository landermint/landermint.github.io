<!DOCTYPE html>
<html>
	<head>

		<meta charset="utf-8">
		<title>My first three.js app</title>
		<style>
		body {
		  font-family: Monospace;
		  background: #222;
		  color: #fff;
		  margin: 0px;
		  overflow: hidden;
		}
		h3 {
		  font-weight: normal;
		}
		#info {
		  color: #fff;
		  position: absolute;
		  top: 10px;
		  width: 100%;
		  text-align: center;
		  z-index: 100;
		  display: block;
		}
		#info a {
		  color: #75ddc1;
		  font-weight: bold;
		}

		</style>

		<script>
		 //===================================================== canvas
		  var renderer = new THREE.WebGLRenderer({ alpha: true, antialiase: true });
		  renderer.setSize(window.innerWidth, window.innerHeight);
		  document.body.appendChild(renderer.domElement);

		  //===================================================== scene
		  var scene = new THREE.Scene();

		  //===================================================== camera
		  var camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000);
		  camera.position.z = 5;
		  camera.position.y = 1.5;

		  //===================================================== lights
		  var light = new THREE.DirectionalLight(0xefefff, 3);
		  light.position.set(1, 1, 1).normalize();
		  scene.add(light);
		  var light = new THREE.DirectionalLight(0xffefef, 3);
		  light.position.set(-1, -1, -1).normalize();
		  scene.add(light);

		  //===================================================== resize
		  window.addEventListener("resize", function() {
		    let width = window.innerWidth;
		    let height = window.innerHeight;
		    renderer.setSize(width, height);
		    camera.aspect = width / height;
		    camera.updateProjectionMatrix();
		  });


		  //===================================================== model
		  var loader = new THREE.GLTFLoader();
		  var mixer;
		  var model;
		  loader.load(
		    "https://raw.githubusercontent.com/baronwatts/models/master/robber.glb", function(gltf) {

		       gltf.scene.traverse( function( node ) {
		          if ( node instanceof THREE.Mesh ) { 
		            node.castShadow = true; 
		            node.material.side = THREE.DoubleSide;
		          }
		        });

		       
		      model = gltf.scene;
		      model.scale.set(.35,.35,.35);
		      scene.add(model);

		      console.log(gltf.animations); //shows all animations imported into the dopesheet in blender

		      mixer = new THREE.AnimationMixer(model);
		      mixer.clipAction(gltf.animations[1]).play();

		      document.body.addEventListener("click", kill);
		      function kill() {
		        mixer.clipAction(gltf.animations[1]).stop();
		        mixer.clipAction(gltf.animations[0]).play();
		        setTimeout(function() {
		          mixer.clipAction(gltf.animations[0]).stop();
		          mixer.clipAction(gltf.animations[1]).play();
		        }, 1500);
		      }

		 
		  });


		//===================================================== animate
		var clock = new THREE.Clock();
		function render() {
		  requestAnimationFrame(render);
		  var delta = clock.getDelta();
		  if (mixer != null) mixer.update(delta);
		  if (model) model.rotation.y += 0.025;

		  renderer.render(scene, camera);
		}

		render();
		</script>
	</head>
	<body>
<div id="info">
  <a href="http://threejs.org" target="_blank" rel="noopener">three.js</a> - GLTFLoader<br /> 3d model from
  <a href="https://www.all3dfree.net/3dcharacter005.html" target="_blank" rel="noopener">all3dfree.net</a><br /> rigged with <a href="https://www.mixamo.com/" target="_blank" rel="noopener">Mixamo</a><br />
  <h3>click to animate</h3>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r124/three.min.js"></script>
<script src="https://unpkg.com/three@0.126.0/examples/js/loaders/GLTFLoader.js"></script>
<script src="https://threejs.org/examples/js/controls/OrbitControls.js"></script>	
	</body>
</html>
