<!DOCTYPE html>
<html lang="en">
	<head>
		<title></title>
		<meta charset="utf-8">
		<meta name="generator" content="Three.js Editor">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<link rel="stylesheet" type="text/css" href="loader.css">
		<script src="https://kit.fontawesome.com/7d795e618e.js" crossorigin="anonymous"></script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r79/three.min.js"></script>


		<style>
			body {
				font-family: sans-serif;
				font-size: 11px;
				background-color: #fff;
				margin: 0px;
			overflow-x: hidden;
			font-size: 1em;
			  font-weight: 300;
			font-family: 'Quicksand', sans-serif;

			}
			h1 {
			  display: block;
			  font-size: 2em;
			  font-weight: 400;
			}
			canvas {
				display: block;
			}
			#msk {
				z-index: 10;
			  position: absolute;
			  width: 280px;
			  height: 280px;
			  margin: 0 auto;
			      left: 50%;
			      top: calc(54% - 140px);

    			transform: translate(-50%, 0);

			}
			#msk:before{
				    content:'';
			    position:absolute;
	
			    width:100%;
			    height:100%;
			    border-radius:100%;
			    box-shadow: 0px 0px 0px 800px #000;

			}
			#canvascontainer{
				  position: absolute;
  					top: calc(54% - 375px);
			}
			#chunk0{
				position:absolute;
				height:100%;
				width:100%;
				top:100%;
				z-index:30;
				background-color: #37d483;
			}


			.flex-container {
				position:absolute;
			  display: flex;
			  color:white;
			  visibility: hidden;

			    justify-content: center;
			width:100%;
			top: calc(58% - 130px);
			  z-index: 30;
			}
			.flex-container2 {
				position:absolute;
			  display: flex;
			 justify-content: center;
			width:100%;
			top: 8%;
			font-size:3em;
			  z-index: 200;
			  padding-top:20px;
			  padding-bottom:20px;
			background-color: rgba(0, 0, 0, 0.3);
;
			  color:white;
			}
			.leftright{
			
				width:300px;

			}

			.middle{
				padding:45px;
								text-align: center;

				flex-basis: 280px;
				flex-grow: 0;
				flex-shrink: 0;
			}
			.myButton {
				background-color:#000;
				border-radius:20px;
				/*border:2px solid #ffffff;*/
				display:inline-block;
				cursor:pointer;
				color:#ffffff;
				font-size:25px;
				font-weight: : 700;
				padding:8px 17px;
			
				text-decoration:none;
				text-align: center;
				width:100px;
				  transition: all 0.5s ease;

			}
			.myButton:hover {
				background-color:#212121;
			}
			.myButton:active {
				position:relative;
				top:1px;
			}
						#newmask{
							position:absolute;
							height:100%;
							width:100%;
							  background-image: url("imgs/bg.jpg");
							  background-size: cover;
							  background-position: center;
							  background-repeat: no-repeat;
							z-index:10;

							  -webkit-mask-image: url(imgs/newmask_v2.svg);
							  -webkit-mask-size: 5120px 2880px;
							  -webkit-mask-repeat: no-repeat;
							  -webkit-mask-position: 50.3% 63%;

						}
						#eyeposescontainer{
							position:fixed;
							display:none;
							z-index:1000;
							color:white;
						}
						#overlaycanvas{
							margin: 0;
							position:absolute;
							z-index:1000;
							width:100%;
							height:100%;
							pointer-events: none;
						}
		</style>

	</head>
	<body ontouchstart="">
		<div id="overlaycanvas"><canvas id="myCanvas"></canvas>
</div>
<!-- 		<div id="msk"></div>
 -->		
 <div id="eyeposescontainer">
<div id="eyeposes"></div><br>
<div id="eyeposes2"></div>
</div>

<div id="newmask"></div>
 <section id="loading-screen">

	<div id="loader"></div>

</section>
		<div class="flex-container2">
		  <div class="leftright" style="text-align: right; right:35px; position:relative;"><i class="fas fa-photo-video"></i></div>
		  <div class="middle2"><i class="fas fa-wifi"></i></div>
		  <div class="leftright" style="text-align: left; left:35px; position:relative;"><i class="fas fa-gamepad"></i></div>
		</div>
		<div id="canvascontainer">
		</div>

		<div class="flex-container">
		  <div class="leftright" style="text-align: right"><h1>asdasdf</h1>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto</div>
		  <div class="middle"></div>
		  <div class="leftright"><h1>asdasdf</h1>consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur</div>
		</div>
		<div id="chunk0"></div>
		<script type="module">
var c;
var ctx;

			import * as THREE from './js/three.module.js';
			import { APP } from './js/app.js';
			import { VRButton } from './js/VRButton.js';
			import { ZipLoader } from './js/ZipLoader.js';
			import { ZipLoadingManager } from './js/ZipLoadingManager.js';

			window.THREE = THREE; // Used by APP Scripts.
			window.VRButton = VRButton; // Used by APP Scripts.

			var loader = new THREE.FileLoader();





			loader.load( 'app.json', function ( text ) {

				var player = new APP.Player();
				player.load( JSON.parse( text ) );
				player.setSize( window.innerWidth, 750 );
				player.play();
				document.getElementById("canvascontainer").appendChild( player.dom );

				window.addEventListener( 'resize', function () {

					player.setSize( window.innerWidth, 750 );

				} );

			} );
			THREE.DefaultLoadingManager.onLoad = function ( ) {

					const loadingScreen = document.getElementById( 'loading-screen' );

					loadingScreen.classList.add( 'fade-out' );
					
					// optional: remove loader from DOM via event listener
					loadingScreen.addEventListener( 'transitionend', onTransitionEnd );

			};
			/*
$( document ).ready(function() {
			const loadingScreen = document.getElementById( 'loading-screen' );

		loadingScreen.classList.add( 'fade-out' );
		
		// optional: remove loader from DOM via event listener
		loadingScreen.addEventListener( 'transitionend', onTransitionEnd );

});
*/

    var currentMousePos = { x: -1, y: -1 };
    $(document).mousemove(function(event) {
        currentMousePos.x = event.pageX;
        currentMousePos.y = event.pageY;
    });

                var imageArray = new Array();
            imageArray[0] = "imgs/exp/1.png";
            imageArray[1] = "imgs/exp/2.png";
            imageArray[2] = "imgs/exp/3.png";
            imageArray[3] = "imgs/exp/4.png";
            imageArray[4] = "imgs/exp/5.png";
            imageArray[5] = "imgs/exp/6.png";
            imageArray[6] = "imgs/exp/7.png";
            imageArray[7] = "imgs/exp/8.png";
            imageArray[8] = "imgs/exp/9.png";
            imageArray[9] = "imgs/exp/10.png";
            imageArray[10] = "imgs/exp/11.png";
            imageArray[11] = "imgs/exp/12.png";
            imageArray[12] = "imgs/exp/13.png";
            imageArray[13] = "imgs/exp/14.png";
            imageArray[14] = "imgs/exp/15.png";
            imageArray[15] = "imgs/exp/16.png";
            imageArray[16] = "imgs/exp/17.png";

var imges = new Array();
for (var i = 0; i < imageArray.length; i++){
	imges[i] = new Image();
	imges[i].src = imageArray[i]
}

function onTransitionEnd( event ) {

	event.target.remove();
}
$("#artbut").click(function() {
					setTimeout(function() {
					    $('html, body').animate({
					        scrollTop: $("#chunk0").offset().top
					    }, 500);
					},300);

});

$( document ).ready(function() {
	c = document.getElementById("myCanvas");
	ctx = c.getContext("2d");

  ctx.canvas.width  = window.innerWidth;
  ctx.canvas.height = window.innerHeight;

});
$(window).bind("resize", function(){
  ctx.canvas.width  = window.innerWidth;
  ctx.canvas.height = window.innerHeight;

});
$( "body" ).click(function(e) {

	  //alert( ""+leftEyex+" "+leftEyey+"" );
	  /*
		       					ctx.clearRect(0, 0, c.width, c.height);
				ctx.beginPath();
				ctx.moveTo(leftEyex, leftEyey);
				ctx.lineTo(e.pageX, e.pageY);
				ctx.stroke();
*/
						  $( "#canvascontainer" ).effect( "shake", { direction: "left", times: 2, distance: 5} , 200);

					setTimeout(function() {
							var offset = parseInt($('#canvascontainer').css('top'));
							var leftEyePos = $( "#eyeposes" ).html().split(",");
							var rightEyePos = $( "#eyeposes2" ).html().split(",");
							var leftEyex = Math.round(leftEyePos[0]);
							var leftEyey = Math.round(leftEyePos[1])+offset;
							var rightEyex = Math.round(rightEyePos[0]);
							var rightEyey = Math.round(rightEyePos[1])+offset;
						makeLine(50,leftEyex,leftEyey,rightEyex,rightEyey,currentMousePos.x,currentMousePos.y);



					},100);
					
						

					
});

function makeLine(timer,eyeposx,eyeposy,eyeposx2,eyeposy2,mousex,mousey){
			   // ctx.clearRect(0, 0, c.width, c.height);
			    if (timer > 0){
ctx.shadowBlur = 10;
ctx.shadowColor = '#FD0100';

			    	ctx.strokeStyle = 'rgba(255, 0, 0, '+scale(timer,0,29,0,1)+')';
					ctx.lineWidth = 5;

					ctx.beginPath();
					ctx.moveTo(eyeposx, eyeposy);
					ctx.lineTo(mousex, mousey);
					ctx.stroke();
					ctx.beginPath();
					ctx.moveTo(eyeposx2, eyeposy2);
					ctx.lineTo(mousex, mousey);
					ctx.stroke();
					timer-=1;
					ctx.shadowBlur = 0;

					var mappednum = Math.floor(scale(timer,49,1,0,16));
									console.log(mappednum);
									 ctx.drawImage(imges[mappednum], mousex-90, mousey-126
									 	,180,252);


					setTimeout(function() {
						ctx.clearRect(0, 0, c.width, c.height);
						makeLine(timer,eyeposx,eyeposy,eyeposx2,eyeposy2,mousex,mousey);
					},10);
				}

					//setTimeout(makeLine(timer,eyeposx,eyeposy,mousex,mousey),1000);

}

function scale (number, inMin, inMax, outMin, outMax) {
    return (number - inMin) * (outMax - outMin) / (inMax - inMin) + outMin;
}
		</script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

	</body>
</html>
